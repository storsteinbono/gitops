---
apiVersion: v1
kind: ConfigMap
metadata:
  name: mediamanager-config
  namespace: mediamanager
data:
  config.toml: |
    # MediaManager Configuration File
    # Documentation: https://maxdorninger.github.io/MediaManager/introduction.html

    [misc]
    frontend_url = "https://mediamanager.torsteinbo.net"
    cors_urls = ["https://mediamanager.torsteinbo.net"]

    image_directory = "/app/data/images"
    tv_directory = "/media/tv"
    movie_directory = "/media/movies"
    torrent_directory = "/app/data/torrents"

    development = false

    # Custom Media Libraries
    [[misc.tv_libraries]]
    name = "TV Shows"
    path = "/media/tv"

    [[misc.movie_libraries]]
    name = "Movies"
    path = "/media/movies"

    [database]
    # Database connection is configured via environment variables
    # DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME
    host = "postgresql-rw.postgres.svc"
    port = 5432
    user = "mediamanager"
    password = "changeme"  # This will be overridden by env var
    dbname = "mediamanager"

    [auth]
    email_password_resets = false

    # IMPORTANT: Generate a random token secret with "openssl rand -hex 32"
    token_secret = "CHANGE_ME_GENERATE_RANDOM_STRING"
    session_lifetime = 86400  # 24 hours

    # Admin users: Update with your email addresses
    admin_emails = ["admin@example.com"]

    # OpenID Connect settings (optional)
    [auth.openid_connect]
    enabled = false
    client_id = ""
    client_secret = ""
    configuration_endpoint = ""
    name = "OpenID"

    [notifications]
    # SMTP settings for email notifications (optional)
    [notifications.smtp_config]
    smtp_host = "smtp.example.com"
    smtp_port = 587
    smtp_user = ""
    smtp_password = ""
    from_email = "mediamanager@example.com"
    use_tls = true

    # Email notifications (optional)
    [notifications.email_notifications]
    enabled = false
    emails = []

    # Gotify notifications (optional)
    [notifications.gotify]
    enabled = false
    api_key = ""
    url = ""

    # Ntfy notifications (optional)
    [notifications.ntfy]
    enabled = false
    url = ""

    # Pushover notifications (optional)
    [notifications.pushover]
    enabled = false
    api_key = ""
    user = ""

    [torrents]
    # qBittorrent settings (optional)
    [torrents.qbittorrent]
    enabled = false
    host = "http://localhost"
    port = 8080
    username = ""
    password = ""

    # Transmission settings (optional)
    [torrents.transmission]
    enabled = false
    host = "http://localhost"
    port = 9091
    username = ""
    password = ""

    # SABnzbd settings (optional)
    [torrents.sabnzbd]
    enabled = false
    host = "http://localhost"
    port = 8080
    api_key = ""

    [indexers]
    # Prowlarr settings (optional)
    [indexers.prowlarr]
    enabled = false
    url = "http://localhost:9696"
    api_key = ""

    # Jackett settings (optional)
    [indexers.jackett]
    enabled = false
    url = "http://localhost:9117"
    api_key = ""

    [metadata]
    # Metadata configuration
